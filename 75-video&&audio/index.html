<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>video</title>
		<style>
			body{
				padding: 0;
				margin: 0;
			}
			body{
				background-color:#000;
				text-align:center;
			}
			video{
				transform:translateY(30px);
				border-radius:8px;
			}
		</style>
	</head>
	<body>
		<video 
			src="//f.us.sinaimg.cn/001V7W2Llx07lOPA72Cs01040200Gyia0k010.mp4?label=mp4_ld&template=636x360.28&Expires=1553965114&ssig=qAZD%2FiJ%2FcB&KID=unistore,video"
			buffered
			poster='http://oss.tan8.com/resource/data/attachment/20161103154535.jpg'
		>
		</video>
		<button>播放/暂停</button>
		<script>
			const video = document.querySelector('video');
			video.onplay = function(){
				console.log('开始播放');
			}
			video.onpause = function(){
				console.log('暂停播放');
			}
			video.ontimeupdate = function(){
				console.log('播放中');
				console.log(this.currentTime,this.duration);
			}
			video.onended = function(){
				console.log('播放结束');	// 也会触发播放暂停事件
			}
			const button = document.querySelector('button');
			let flag = true;
			// true表示播放,false表示暂停
			button.onclick = function(){
				if(flag){
					video.play();
					flag = false;
					console.log(video.paused);
				}else{
					video.pause();
					flag = true;
					console.log(video.paused);
				}
			}
			video.onclick = function(){
				this.pause();
			}
			button.onclick = function(){
				if(video.paused){
					video.play();
				}else{
					video.pause();
				}
			}
			document.addEventListener('visibilitychange',function(e){
				console.log(document.visibilityState);
				const state = document.visibilityState;
				switch(state){
					case 'hidden':
					video.pause();
					break;
					case 'visible':
					video.play();
					break;
				}
			},false);
		</script>
	</body>
</html>
