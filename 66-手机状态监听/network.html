<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>手机状态监听</title>
		<style>
			body,ul,ol,p{
				padding: 0;
				margin: 0;
			}
			#status{
				width:100%;
				font:bold 1em sans-serif;
				color:#fff;
				padding:0.5em;
			}
			.online{
				background-color:skyblue;
			}
			.offline{
				background-color:pink;
			}
		</style>
	</head>
	<body>
		<div id="status"></div>
		<div id="log"></div>
		<p>This is a test</p>
		<script>
			window.addEventListener('load',function(){
				const status = document.getElementById('status');
				const log = document.getElementById('log');
				// 定义一个函数检测网络的更新状态,
				function updateOnlineStatus(event){
					let condition = navigator.onLine ? 'online' : 'offline';
					console.log(condition);
					// 此处不能用classList,会一直添加online和offline这两个类目
					// status.classList.add(condition);
					status.className = condition;
					status.innerHTML = condition.toUpperCase();
					// log.insertAdjacentHTML('beforeend','Event:'+event.type + ';Status:' + condition);
					log.innerHTML = `Event:${event.type}; Status:${condition}`;
				}
				window.addEventListener('online',updateOnlineStatus,false);
				window.addEventListener('offline',updateOnlineStatus,false);
			},false);
		</script>
	</body>
</html>
