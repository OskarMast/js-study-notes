<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Vuex</title>
	</head>
	<body>
		<div id="demo"></div>
		<div id="server"></div>
		<script src="https://unpkg.com/vue/dist/vue.js"></script>
		<script src="https://unpkg.com/vuex@2.0.0"></script>
		<script>
// 			const store = new Vuex.Store({
// 				state:{
// 					count:0
// 				},
// 				mutations:{
// 					increment(state){
// 						state.count++;
// 					}
// 				}
// 			});
// 			store.commit("increment");
// 			console.log(store.state.count);
// 			
// 			new Vue({
// 				data(){
// 					return{
// 						count:0
// 					}
// 				},
// 				template:"<div>{{count}}</div>",
// 				methods:{
// 					increment(){
// 						this.count++;
// 					}
// 				}
// 			});
// 			
			const store = new Vuex.Store({
				state:{
					count:0,
					todos:[
						{id:1,text:"1",done:true},
						{id:2,text:"2",done:false},
						{id:3,text:"3",done:true}
					]
				},
				getters:{
					doneTodos:state => {
						return state.todos.filter(todo => todo.done);
					},
					doneTodosCount:function(state,getters){
						console.log(getters.doneTodos.length);
						console.log(state.todos.length);
						return getters.doneTodos.length;
						return state.todos.length;
					},
					getTodoById(state){
						return function(id){
							return state.todos.find( todo => todo.id === id );
						}
					}
				}
			});
			// console.log(store.getters.doneTodos);
			store.getters.doneTodosCount
			let a = store.getters.getTodoById(2);
			console.log(a);
			
			
			const Counter = {
				template:"<div>{{count}}--{{len}}</div>",
				computed:{
					count(){
						return this.$store.state.count
					},
					len(){
						return this.$store.getters.doneTodosCount;
					}
				}
			}
			const server = new Vue({
				el:"#server",
				store,
				components:{Counter},
				template:"<div><counter></counter></div>"
			})
			
			new Vue({
				el:"#demo",
				data:{
					message:'Hello'
				},
				template:"<div><p>{{message}}</p></div>"
			})
		</script>
	</body>
</html>
