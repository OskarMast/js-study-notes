<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>File</title>
    <style>
        label{
            display:block;
            background-color:#f1f1f1;
            width:80px;
            height:30px;
            border-radius:8px;
            text-align:center;
            line-height:30px;
            font-size:13px;
            cursor:pointer;
        }
        .blob-container,.reader-container{
            width:300px;
            height:300px;
            border:1px solid #f1f1f1;
        }
    </style>
</head>
<body>
<input class='file' type="file" multiple id="fileEleme" style="display:none">
<label for="fileEleme">select files</label>
<h3>通过Blob读取图片</h3>
<div class="blob-container"></div>
<h3>通过FileReader读取图片</h3>
<div class="reader-container"></div>
<script>
    const oFile = document.querySelector('.file');
    function _$(el){
        return document.querySelector(el);
    }
    /*通过blob读取图片*/
    oFile.addEventListener('change',function(){
        let files = this.files;
        Array.prototype.forEach.call(files,(file) => {
            let imageType = /^image\//;
            if(!imageType.test(file.type)){
                continue;
            }
            let blob = new Blob([file]);
            let url = window.URL.createObjectURL(blob);
            let img = new Image(100,100);
            img.src = url;
            img.onload = function(){
                window.URL.revokeObjectURL(url);
                _$('.blob-container').appendChild(img);
            }
        })
    },false);

    oFile.addEventListener('change',function(){
        let files = this.files;
        for(let i = 0,file;file = files[i];i++){
            let imageType = /^image\//;
            if(!imageType.test(file.type)){
                continue;
            }
            let reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function(event){
                let img = new Image(100,100);
                img.src = event.target.result;
                img.onload = function(){
                    _$('.reader-container').appendChild(img);
                }
            }
        }
    },false);
</script>
</body>
</html>