<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Map的属性和方法</title>
</head>
<body>
    <script>
        const map = new Map();
        map.set('foo',true);
        map.set('bar',false);

        console.log(map);
        console.log(map.size);  // 2
        
        const m = new Map();
        m.set('direction','right');
        console.log(m);
        m.set('standard','high');
        console.log(m);

        let set = new Set();
        set.add('123');
        set.add('456');
        console.log(set);

        let s1 = new Set()
        .add('kyrie')
        .add('lebron')
        .add('curry');

        console.log(s1);

        let m1 = new Map()
        .set('name','kyrie')
        .set('age',26)
        .set('position','guard');
        console.log(m1);

        const m2 = new Map();
        const hello = function(){
            console.log('hello');
        }
        m2.set(hello,'Hello ES6!');
        console.log( m2.get(hello) );
        hello();

        const m3 = new Map()
        .set({p:'Hello'},['a'])
        .set(['hello'],'world')
        .set('hello','world');

        console.log(m3);
        console.log( m3.has({p:'Hello'}) ); // false
        console.log( m3.has('hello'));      // true


        const m4 = new Map();
        m4.set(undefined,'nah');
        console.log( m4.has(undefined) );   // true
        m4.delete(undefined);
        console.log( m4.has(undefined) );   // false

        const m5 = new Map([
            ['title','nba'],
            ['player','lebron'],
            ['skill','crossover']
        ]);
        console.log(m5);
        console.log(m5.has('title'));   // false
        m5.clear();
        console.log(m5);    // Map(0) {}

        const foo = new Map([
            ['F','no'],
            ['T','yes'],
        ]);
        console.log(foo.keys());
        console.log(foo.values());
        console.log(foo.entries());
        console.log(typeof foo.keys()); // object
        
        for(let key of foo.keys()){
            console.log(key);
        }

        for(let item of foo.values()){
            console.log(item);
        }
        for(let item of foo.entries()){
            console.log(item);
        }
        for(let [key,value] of foo.entries()){
            console.log(key,value);
        }

        foo.forEach(function(item,index){
            console.log(item,index);    
            // no   F
            // yes  T
        });

        for(let [key,value] of foo){
            console.log(key,value);
        }


        let bar = new Map([
            [1,'one'],
            [2,'two'],
            [3,'three'],
        ]);
        console.log([...bar.keys()]);
        console.log([...bar.values()]);
        console.log([...bar.entries()]);

        const map0 = new Map()
        .set(1,'a')
        .set(2,'b')
        .set(3,'c');
        console.log(map0);

        // 过滤,输出键值小于3的map结构

        let newMap = new Map([...map0].filter(function([key,value]){
            return key < 3
        }));
        console.log(newMap);

        let nMap = new Map([...map0].map(function([key,value]){
            return [key * 2 , '_' + value];
        }));

        console.log(nMap);

        map0.forEach(function([key,value]){
            console.log([key,value]);
        });

        map0.forEach(function(item,index,array){
            console.log(item,index,array);
        });

        map0.forEach(function(value,key){
            console.log(value,key);
        });

        let map1 = new Map()
        .set('name','kyrie')
        .set('title','player')
        .set('age','26')
        console.log(map1);
        console.log([...map1]);
        
        function MapToObj(map){
            let obj = Object.create(null);
            for(let [key,value] of map.entries()){
                obj[key] = value;
            }
            return obj;
        }

        let map2 = new Map()
        .set('one',1)
        .set('two',2)
        .set('three',3);

        console.log(map2);

        let newObj = MapToObj(map2);
        console.log(newObj);

        console.log(typeof map2);   // obj
        console.log(typeof newObj); // obj

        let object = {
            firstName:'kyrie',
            laseName:'irving',
            fullName:'kyrie-irving'
        };

        function ObjToMap(obj){
            let arr = [];
            for(let key in obj){
                arr.push([key,obj[key]]);
            }
            let map = new Map(arr);
            return map;
        }

        let map01 = ObjToMap(object);
        console.log(map01);


        function objToStrMap(obj){
            let strMap = new Map();
            for(let key of Object.keys(object)){
                strMap.set(key,obj[key]);
            };
            return strMap;
        }

        let map02 = objToStrMap(object);
        console.log(map02);

        for(let key of Object.keys(object)){
            console.log(key);
        }


        function strMapToJson(strMap){
            return JSON.stringify(MapToObj(strMap));
        }

        let newJson = strMapToJson(map2);
        console.log(newJson);
        console.log(typeof newJson);    // string

    </script>   
</body>
</html>