<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Set数据结构</title>
    <style>
        body,ul,ol{
            padding: 0;
            margin: 0;
        }
        ul,ol{
            list-style:none;
        }
    </style>
</head>
<body>
    <ul class="list">
        <li class="item1">1</li>
        <li class="item2">2</li>
        <li class="item3">3</li>
        <li class="item4">4</li>
        <li class="item5">5</li>
    </ul>
    <script>
        console.log(Set);
        console.log(Symbol);
        
        const s = new Set();

        [2,3,5,4,5,2,2].forEach(function(item){
            s.add(item);
        });
        console.log(s); // [2,3,5,4]
        console.log(typeof s);  // object
        console.log(s.__proto__);
        console.log(s.__proto__ == Set.prototype);  // true

        for(let item of s){
            console.log(item);   // 2 3 5 4
        }

        const set = new Set([1,2,3,4,5]);
        console.log(set);
        console.log([...set]);

        const items = new Set([1,2,3,4,5,5,5,5]);
        console.log(items); // Set(5) [1,2,3,4,5]
        console.log(items.size);    // 5

        let aLi = document.querySelectorAll('.list>li');
        const li = new Set(aLi);
        console.log(li);
        console.log(aLi);
        console.log(li.size);   // 5

        const obj = {
            0:1,
            1:2,
            2:3,
            length:3
        }

        const o = new Set(Array.from(obj)); // 
        console.log(o);

        let array = ['a','b','c','c','a','d'];
        const newArr = new Set(array);
        console.log([...newArr]);   // ['a','b','c','d']

        let str = 'abccad';
        console.log(str.split(''));
        let newStr = new Set(str.split(''))
        console.log([...newStr]);   // ['a','b','c','d']

        // 计算每个字符串出现的次数
        let string = str.split('').reduce((x,y)=>((x[y]?x[y]++:x[y]=1),x),{});
        console.log(string);
        
        console.log( new Set('abccad') );
        console.log([...new Set('abccad')].join(''));   // abcd

        let arr = [NaN,NaN,1,2];
        console.log([...new Set(arr)]); // [NaN,1,1]

        const a = new Set();
        a.add(NaN);
        a.add(NaN);
        console.log(a);
        
        let s1 = new Set(['a']);
        let s2 = new Set(['a']);
        console.log(s1==s2);    // false

        console.log(new Set('a'));
        // console.log(new Set(123));   
        console.log(new Set('123'));

        let set1 = new Set();
        set1.add({});
        console.log(set1.size); // 1

        set1.add({});
        console.log(set1.size); // 2

        set1.add([]);
        console.log(set1.size); // 3
        set1.add([]);
        console.log(set1.size); // 4
        console.log(Set.prototype.constructor); // Set

        const data = new Set();
        data.add([1,2,3]);
        console.log(data);
        let newData = [...data];
        console.log(newData[0][1]);

        data.add('kyrie');
        data.add('james');
        console.log(data);  
        console.log(data.has('kyrie')); // true
        console.log(data.has('james')); // true
        data.delete('kyrie');
        console.log(data);
        data.delete('james');
        console.log(data.size); // 1

        const age = new Set([18,20,15,18,19,22]);
        console.log(Array.from(age));
        console.log(age);

        const player = new Set(['kyrie','lebron','durant','curry','wade','kobe']);
        console.log( player.keys() );
        console.log( player.values());
        console.log( player.entries());
        player.forEach(function(item){
            console.log(item);
        });

        console.log(typeof player.keys());  // object
        for(let item of player.keys()){
            console.log(item);
        }
        for(let item of player.values()){
            console.log(item);
        }
        for(let [key,value] of player.entries()){
            console.log(key,value);
        }

        let colors = new Set(['green','red','blue']);

        for(let item of colors.keys()){
            console.log(item);
        }
        for(let item of colors.values()){
            console.log(item);
        }
        for(let item of colors.entries()){
            console.log(item);
        }

        console.log(Set.prototype[Symbol.iterator] === Set.prototype.values);   // true

        for(let item of colors){
            console.log(item);  // green red blue
        }
        colors.forEach(function(item,index){
            console.log(item,index);
        });

        let arr1 = [3,5,2,2,5,5];
        let unique = [...new Set(arr1)];
        console.log(unique);    // [3,5,2]

        let map = new Set([1,2,3]);
        // let newMap = [...map].map(function(item){
        //     return item*2;
        // });
        // console.log(newMap);    // [2,4,6]

        // map = new Set([...map].map(x=>x*2));
        // console.log(map);   // Set(3)[2,4,6]

        newMap = new Set([...map].filter(x=>(x%2)==0));
        console.log(newMap);    // Set(1)[2]


        let array1 = new Set([1,2,3]);
        let array2 = new Set([4,3,2]);

        // 并集,去除重复的数据 
        let union = new Set([...array1,...array2]);
        console.log(union); // Set(4){1,2,3,4}

        // 交集,如果a中的数据b都有,就返回
        array1.forEach(function(item){
            console.log(item);
        })
        array1.forEach(function(item){
            if( array2.has(item) ){
                console.log(item);
            }
        });

        let newArr1 = new Set([...array1].filter(x=>array2.has(x)));
        console.log(newArr1);   // Set(2){2,3}

        array1.forEach(function(item){
            if( !array2.has(item) ){
                console.log(item);  // 1
            }
        });

        let newArr2 = new Set([...array1].filter(x => !array2.has(x)));
        console.log(newArr2);


        let a1 = new Set([2,3,4]);
        let a2 = new Set([3,4,5]);

        console.log( new Set([...a1,...a2]) ); 

    </script>   
</body>
</html>