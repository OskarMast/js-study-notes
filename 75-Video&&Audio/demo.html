<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>简易网易播放器</title>
		<link rel="stylesheet" href="https://at.alicdn.com/t/font_720661_82cjvmwuxir.css">
		<style>
			body,ul,ol{
				padding: 0;
				margin: 0;
			}
			ul,ol{
				list-style:none;
			}
			.container{
				margin:10px auto 0;
				width: 1100px;
				min-height:390px;
				height:auto;
				border:1px solid #ccc;
			}
			.list>li{
				height:33px;
				font-size:13px;
				line-height:33px;
				cursor:default;
			}
			.list>li:nth-of-type(2n){
				background-color:#f5f5f7;
			}
			.list>li .num{
				padding:0 15px;
				color:#a599a5;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<ul class="list"></ul>
		</div>
		<script>
			const audio = document.createElement('audio');
			const oList = document.querySelector('.list');
			document.body.appendChild(audio);
			
			//使用fetch获取网易云音乐数据
			fetch("https://api.wulv5.com/music/artists?id=6452")
			.then(response => response.json())
			.then(data => {
				const songs = data.hotSongs;
				let str = '';
				songs.forEach(function(item,index){
					index = index + 1;
					index = index < 9 ? '0' + (index+1) : index+1;
					const oLi = document.createElement('li');
					str = "<span class='num'>" + index + "</span><span class='name'>"+ item.name + "</span>";
					oLi.innerHTML = str;
					oList.appendChild(oLi);
					oLi.addEventListener('click',function(){
						fetch("https://api.wulv5.com/music/song/url?id=" + item.id)
						.then(function(response){
							return response.json();
						})
						.then(function(json){
							let url = json.data[0].url;
							audio.src = url;
							audio.play();
						})
						.catch(function(err){
							console.log(err);
							alert('当前音乐不可用');
						})
					});
				});
			});
		</script>
	</body>
</html>
