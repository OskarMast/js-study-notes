<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>canvas图像下载</title>
	</head>
	<body>
		<canvas id='canvas1' height='200'></canvas>
		<canvas id="canvas2"></canvas>
		<a href="">下载</a>
		<script>
			const canvas1 = document.getElementById('canvas1');
			const ctx1 = canvas1.getContext('2d');
			
			ctx1.fillStyle = 'red';
			ctx1.arc(60,100,50,0,Math.PI*2,false);
			ctx1.fill();
			ctx1.globalCompositeOperation = 'source-out';
			
			ctx1.beginPath();
			ctx1.fillStyle = 'blue';
			ctx1.arc(95,115,50,0,Math.PI*2,false);
			ctx1.fill();
			
			const a = document.querySelector('a');
// 			const img = document.createElement('img');
// 			img.src = url;
// 			document.body.appendChild(img);
// 			a.download = url;
			
// 			const url = window.URL.createObjectURL(canvas1.toDataURL());
// 			console.log(url);
			a.download = '合成canvas';
			canvas1.toBlob(function(blob){
				a.href = window.URL.createObjectURL(blob);
			});
			
			const canvas2 = document.getElementById('canvas2');
			const ctx2 = canvas2.getContext('2d');
			
			ctx2.fillStyle = 'pink';
			ctx2.arc(50,100,50,0,Math.PI*2,false);
			ctx2.fill();
			ctx2.arc(100,110,50,0,Math.PI*2,false);
			ctx2.fill();
			
			console.log(canvas2.toDataURL());	// 返回一个base64的图片地址
			
			canvas2.toBlob(function(blob){
				console.log(blob);
				const url = window.URL.createObjectURL(blob);
				console.log(url);
			},{type:'image/jpeg'},1);
			
		</script>
	</body>
</html>
