<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>sava和restore方法</title>
		<style>
			body{
				margin: 0;
				padding: 0;
			}
			canvas{
				background-color:skyblue;
				border:1px solid #000;
			}
		</style>
	</head>
	<body>
		<canvas id='canvas1' width='300' height='300'></canvas>
		<canvas id='canvas2' width='300' height='300'></canvas>
		<canvas id='canvas3' width='300' height='300'></canvas>
		<canvas id='canvas4' width='300' height='300'></canvas>
		<canvas id='canvas5' width='300' height='300'></canvas>
		<script>
			
			const canvas1 = document.getElementById('canvas1');
			const ctx1 = canvas1.getContext('2d');
			
			ctx1.save();	// 保存默认的状态
			ctx1.fillStyle = 'red';
			ctx1.fillRect(0,0,100,100);
			
			ctx1.restore();	// 还原到上次保存的默认状态
			ctx1.fillRect(100,100,100,100);
			
			const canvas2 = document.getElementById('canvas2');
			const ctx2 = canvas2.getContext('2d');
			
			ctx2.beginPath();
			ctx2.strokeStyle = 'red';
			ctx2.lineWidth = 10;
			ctx2.moveTo(20,20);
			ctx2.lineTo(150,20);
			ctx2.stroke();
			ctx2.save();
			
			ctx2.beginPath();
			ctx2.strokeStyle = 'green';
			ctx2.lineWidth = 15;
			ctx2.moveTo(20,40);
			ctx2.lineTo(150,40);
			ctx2.stroke();
			
			ctx2.restore();
			ctx2.beginPath();
			ctx2.moveTo(20,60);
			ctx2.lineTo(150,60);
			ctx2.stroke();
		
			const canvas3 = document.getElementById('canvas3');
			const ctx3 = canvas3.getContext('2d');
			ctx3.save();
			ctx3.setLineDash([3,2]);
			ctx3.lineWidth = 4;
			ctx3.strokeStyle = '#f00';
			ctx3.strokeRect(10,10,100,100);
			
			ctx3.restore();
			// 此时没有开辟新的路径,这个圆保持了canvas默认的状态.
			ctx3.arc(150,150,50,0,Math.PI*2,false);
			ctx3.stroke();
			
			const canvas4 = document.getElementById('canvas4');
			const ctx4 = canvas4.getContext('2d');
			
			ctx4.setLineDash([2,2]);
			ctx4.lineWidth = 3;
			ctx4.strokeStyle = '#00f';
			ctx4.save();
			
			ctx4.strokeStyle = '#ff0';
			ctx4.strokeRect(10,10,100,100);

			ctx4.restore();
			ctx4.arc(150,150,50,0,Math.PI*2,false);
			ctx4.stroke();
			
			// 当有多个save()的时候
			const canvas5 = document.getElementById('canvas5');
			const ctx5 = canvas5.getContext('2d');
			
			ctx5.save();
			
			ctx5.lineWidth = 5;
			ctx5.strokeStyle = 'red';
			ctx5.save();
			
			ctx5.lineWidth = 10;
			ctx5.strokeStyle = 'orange';
			ctx5.save();
			
			ctx5.lineWidth = 15;
			ctx5.strokeStyle = 'yellow';
			ctx5.save();
			
			ctx5.restore();
			ctx5.beginPath();
			ctx5.moveTo(10,10);
			ctx5.lineTo(150,10);
			ctx5.stroke();
			
			ctx5.restore();
			ctx5.beginPath();
			ctx5.moveTo(10,40);
			ctx5.lineTo(150,40);
			ctx5.stroke();
			
			ctx5.restore();
			ctx5.beginPath();
			ctx5.moveTo(10,70);
			ctx5.lineTo(150,70);
			ctx5.stroke();
			
			ctx5.restore();
			ctx5.beginPath();
			ctx5.moveTo(10,100);
			ctx5.lineTo(150,100);
			ctx5.stroke();
			
		</script>
	</body>
</html>
