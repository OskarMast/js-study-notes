<!doctype html>
<html>
	<head>
		<meta charset='UTF-8'>
		<meta Keywords='' content=''>
		<meta Description='' content=''>
		<title>H5-拖拽</title>
		<style>
			body,ul,ol{
				padding: 0;
				margin: 0;
			}
			.box1{
				width: 100px;
				height: 100px;
				background-color:pink;
			}
			.box2{
				width: 200px;
				height: 200px;
				background-color:skyblue;
			}
			.box{
				width: 100px;
				height: 100px;
				background-color:pink;
				color:#fff;
			}
			.container{
				margin:100px auto 0;
				width: 400px;
				height: 400px;
				border:2px solid red;
			}
		</style>
	</head>
	<body>
		<div class="box1" draggable='true'></div>
		<div class="box2"></div>
		<div class="box" draggable='true'></div>
		<div class="container"></div>
		<script>
			const oBox1 = document.querySelector('.box1');
			const oBox2 = document.querySelector('.box2');
			
			oBox1.ondragstart = function(e){
				e = e || window.e;
				e.dataTransfer.setData('key','value');
				this.innerHTML = '开始拖拽';
				console.log('开始拖拽');
			}
			oBox1.ondrag = function(){
				this.innerHTML = '拖拽中...';
				console.log('拖拽中...');
			}
			oBox1.ondragend = function(){
				this.style.backgroundColor = 'red';
				console.log('拖拽结束');
			}
			oBox2.addEventListener('dragenter',function(e){
				console.log('进入目标元素');
			},false);
			
			oBox2.addEventListener('dragover',function(e){
				e = e || window.e;
				e.preventDefault();
				console.log('在目标元素上方');
			},false);
			
			oBox2.addEventListener('dragleave',function(){
				console.log('拖拽结束');
			},false);
			
			oBox2.addEventListener('drop',function(e){
				e = e || window.e;
				e.preventDefault();
				console.log('放置成功');
			},false);
			
			const oBox = document.querySelector('.box');
			const oContainer = document.querySelector('.container');
			oBox.ondragstart = function(event){
				event = event || window.event;
				event.dataTransfer.setData('key','value');
				this.style.background = 'red';
			}
			oBox.ondrag = function(){
				this.innerHTML = '被拖拽中...';
			}
			oBox.ondragend = function(){
				console.log('拖拽结束');	// 鼠标弹起的时候触发
			}
			// 进入目标元素
			oContainer.ondragenter = function(){
				this.style.backgroundColor = '#0f0';
				console.log('进入目标元素');
			}
			// 在目标元素上方
			oContainer.ondragover = function(e){
				e.preventDefault();
				console.log('a');
			}
			// 离开目标元素
			oContainer.ondragleave = function(){
				this.innerHTML = '轻轻地我走了,不带走一片云彩';
			}
			// 放置事件
			oContainer.ondrop = function(){
				console.log('文件放置结束');
			}
		</script>
	</body>
</html>