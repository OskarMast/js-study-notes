<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FormData对象</title>
</head>
<body>
<form action="" name="info" class="info">
    <p>姓名：<input type="text" name="username" value=""></p>
    <p>年龄：<input type="text" name="age" value=""></p>
    <p>
        男：<input type="radio" name="sex" value="男">
        女：<input type="radio" name="sex" value="女">
    </p>
</form>
<input type="file" name="imgs" id="ipt">
<button id="update">开始上传</button>
<button id="btn">点击上传数据</button>
<script>
    function $(ele){
        return document.getElementById(ele);
    }
    let formData = new FormData();
    formData.append("username","kyrie");
    function ajax(data) {
        let xhr = new XMLHttpRequest();
        xhr.open("POST", "http://localhost:5000", true);
        xhr.send(data);
        xhr.onreadystatechange = function(){
            if(xhr.readyState == 4 && xhr.status == 200){
                console.log(xhr.responseText);
            }
        }
    }
    console.log(formData);
    console.log(formData.get("username"));

/*    btn.onclick = function(){
        ajax(formData);
    }*/

    let oInfo = document.querySelector(".info");
    btn.onclick = function(){
        let fd = new FormData(oInfo);
        ajax(fd);
    }

    let formData1 = new FormData();
    formData1.append('firstName','kyrie');
    formData1.append("firstName","lebron");
    formData1.append("lastName","irving");
    formData1.append("age",26);
    console.log(formData1.entries());
    for(let key of formData1.entries()){
        console.log(key);
    }
    formData1.set("firstName","james");
    console.log(formData1.get('firstName'));
    console.log(formData1.getAll("firstName")); // 返回一个数组

    console.log(formData1.has("firstName"));    // true
    console.log(formData1.has("name"));         // false
    for(let key of formData1.keys()){
        console.log(key);
    }
    for(let value of formData1.values()){
        console.log(value);
    }
    let fd = new FormData();
    ipt.onchange = function(){
        let data = ipt.files[0];
        fd.append("file",data);
    }
    update.onclick = function(){
        let xhr = new XMLHttpRequest();
        xhr.upload.onprogress = function(event){
            console.log(event.loaded,event.total);
        }
        xhr.open("POST","http://localhost:7000",true);
        xhr.send(fd);
    }



</script>
</body>
</html>