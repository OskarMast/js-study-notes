<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>useMemo</title>
</head>
<body>
<div id="app"></div>
<div id="root"></div>
<script src="./node_modules/babel-standalone/babel.js"></script>
<script src="./node_modules/react/umd/react.development.js"></script>
<script src="./node_modules/react-dom/umd/react-dom.development.js"></script>
<script type="text/babel">
    function Counter (props){
        return (
            <p>Counter-count:{props.count}</p>
        )
    }

    function App(){
        const [count,setCount] = React.useState(0);
        const handleClick = () => {
            setCount(count+1)
        }
        const double = React.useMemo(() => {
            return count * 2;
        },[count])
        return (
            <div>
                <p>App-count:{count}</p>
                <Counter count={count}/>
                <p>Memo-count:{double}</p>
                <button
                    onClick={handleClick}
                >Submit</button>
            </div>
        )
    }
    ReactDOM.render(
        <App/>,
        document.getElementById("app")
    )

    // 将修改的两个属性传递给子组件,接受的子组件 将其中一个数据title修改, 每次修改content时,也会导致title修改函数的执行
    function Root(){
        const [title,setTitle] = React.useState("title");
        const [content,setContent] = React.useState("content");
        return (
            <React.Fragment>
                <button onClick={() => {setTitle(new Date().getTime())}}>title</button>
                <button onClick={() => {setContent(new Date().getTime())}}>content</button>
                <Bar title={title}>{content}</Bar>
            </React.Fragment>
        )
    }

    function Bar({title,children}){
        function changeTitle(title){
            console.log("title修改了");
            return title + "修改title的方法";
        }
        const otherTitle = React.useMemo(() => {
            return changeTitle(title);
        },[title]);
        return (
            <div>
                <p>title: {otherTitle}</p>
                <p>content: {children}</p>
            </div>
        )
    }

    ReactDOM.render(
        <Root/>,
        document.getElementById("root")
    )

</script>
</body>
</html>