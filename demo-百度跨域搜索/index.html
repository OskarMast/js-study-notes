<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>百度以下,你就知道</title>
    <link rel="short cut icon" type='images/x-icon' href="http://www.baidu.com/favicon.ico">
    <style>
        body,ul,ol,p,h1,h2,h3,h4,h5,h6,dl,dd,dt,select,
        textarea,input,form,fieldset{
            padding: 0;
            margin: 0;
        }
        h1,h2,h3,h4,h5,h6{
            font-weight:normal;
            font-size:100%;
        }
        ul,ol{
            list-style:none;
        }
        .logo{
            width: 350px;
            height: 168px;
        }
        .text{
            width: 640px;
            height: 40px;
            text-indent:10px;
            font-size:20px;
        }
        .logo,.text{
            margin:0 auto;
            display:block;
        }
        .data{
            margin:0 auto;
            width: 642px;
            height:auto;
            border:2px solid #ccc;
            border-top-width:0;
            display:none;
        }
        .data .list>li{
            font-size:18px;
            line-height:30px;
            text-indent:10px;
            cursor:pointer;
        }
        .data .list>li:hover{
            background-color:#f0f0f0;
        }
    </style>
</head>
<body>
    <img src="./bd_logo.png" alt="" class="logo" width='540' height='258'>
    <input type="text" class='text'>
    <div class="data">
        <ul class="list">
        </ul>
    </div>
    <script>
        /*
        功能实现: 实现百度的关键词联想功能并实现关键词点击后的跳转
        业务逻辑：
            1. 先获取需要的元素,通过h5提供的 querySelector()方法
            2. 鼠标抬起事件,获取输入的内容,并用变量保存,
            3. 通过字符串拼接,将保存的输入的数据变量和数据地址拼接成一个新地址,并新建一个script标签,设置为script的src属性
            4. 将新建的script标签插入body标签底部.
            5. 通过地址后面的回调函数获取数据,并输出数据
            6. 利用for循环,分别输出获取的数据
            7. 新建li标签,将获取的数据分别插入到li innerText
            8. 再把新建的li标签插入到页面上的 ul元素.
            9. 每次输入字符时,li会不停更新插入到Ul元素里面,需要在每次输入后,将上一次添加的元素清空。
            10. 利用for循环,将数据循环出来,并设置到li的innerText，
            11. 每次点击li时,利用window.location.href实现跳转, 跳转的地址为 https://www.baidu.com/s?wd= + 关键字
            12. 关键字为for循环出来的数据,和数据地址拼接好就可以实现关键词点击跳转功能。
        */
        let oData = document.querySelector('.data'),
        oInput = document.querySelector('.text'),
        oList = document.querySelector('.list'),
        val = '';

        oInput.addEventListener('keyup',function(e){
           e = e || window.e;
           val = this.value;
            var oScript = document.createElement('script');
            oScript.src = 'https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd='+val+'&cb=getSource';
            document.body.appendChild(oScript);
        },false);

        function getSource(data){
            var data = data.s;
            oList.innerHTML = '';
            data.forEach(function(item,index){
                if(data.length){
                    oData.style.display = 'block';
                    var oLi = document.createElement('li'); 
                    oLi.innerText = item;
                    oList.appendChild(oLi);
                    oLi.addEventListener('click',function(e){
                        e = e || window.e;
                        window.location.href = `https://www.baidu.com/s?wd='${item}`;
                    },false);
                    oInput.addEventListener('keydown',function(e){
                        if(e.keyCode == 13){
                            window.location.href = `https://www.baidu.com/s?wd=${val}`;
                        }
                    },false);
                }
            });
       }
    </script>
</body>
</html>