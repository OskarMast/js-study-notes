<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>前端路由</title>
    <style>
        body,ul,ol{
            padding: 0;
            margin: 0;
        }
        ul{
            list-style:none;
        }
        body{
            background-color:#ddd;
        }
        .list>li{
            margin-bottom:20px;
            width:80px;
            height:30px;
            border:1px solid #fff;
            text-align:center;
            line-height:30px;
            user-select:none;
            cursor:pointer;
        }
        .box{
            margin:20px auto;
            width:60%;
            min-width:800px;
            height:400px;
            border:1px solid #fff;
            display:flex;
            justify-content:space-around;
            align-items:center;
        }
        .content{
            width:500px;
            height:200px;
            border:1px solid #fff;
        }
    </style>
</head>
<body>
<div class="box">
    <ul class="list">
    </ul>
    <div class="content"></div>
</div>
<script>
    let data = {
        "Apple":'苹果公司（Apple Inc. ）是美国一家高科技公司。由史蒂夫·乔布斯、斯蒂夫·沃兹尼亚克和罗·韦恩(Ron Wayne)等人于1976年4月1日创立，并命名为美国苹果电脑公司（Apple Computer Inc. ），2007年1月9日更名为苹果公司，总部位于加利福尼亚州的库比蒂诺。',
        "HUAWEI":"华为消费者业务产品全面覆盖手机、移动宽带终端、终端云等，凭借自身的全球化网络优势、全球化运营能力，致力于将最新的科技带给消费者，让世界各地享受到技术进步的喜悦，以行践言，实现梦想。",
        "Mi":"小米商城是小米官方网站直营小米旗下所有产品，囊括小米手机系列小米MIX 3 、小米9，红米手机系列Redmi Note 7，智能硬件,配件及小米生活周边，同时为米粉提供客户服务及售后支持。"
    }

    /*
    * 1. 将 数据的key值渲染到页面的li
    * 2. 点击左边的li元素显示对应的内容
    *   2.1 先获取所有的元素,然后元素循环绑定事件
    * */
    let oList = document.querySelector(".list");
    let oContent = document.querySelector(".content");
    let str = ""
    for(let key in data){
        str += `<li data-name="${key}">${key}</li>`;
    }
    oList.innerHTML = str;
    let aLi = document.querySelectorAll("li");
    aLi.forEach((item,index) => {
        item.onclick = function(){
            // 点击时添加历史记录
            // 先判断是否支持 window.history
            if(window.history && window.history.pushState) {
                window.history.pushState({name: item.dataset.name}, 'title' + index, "#name=" + item.dataset.name);
                oContent.innerText = data[this.dataset.name];
            }
            /*          console.log(this.dataset);
            console.log(this.dataset.name);
            console.log(data[this.dataset.name]);*/
        }
    });
    /*
    history.pushState() 和 history.replaceState()分别可以添加和修改历史记录。这两个方法需要传递三个参数
        1. 状态对象
        2. 标题
        3. URL

    当活动历史条目更改时,将触发popstate事件，如果被激活的历史条目是通过history.pushState()
    或者对history.replaceState()的调用的影响,popstate事件的state属性包含历史条目的状态对象的副本

    tips:
    1. History.pushState()和history.replace()事件不会触发popstate事件,只有在浏览器做出动作时,才会触发该事件。
    2. pushState() 不会触发hashchange()事件,即使新的URL和之前的URL哈希值不同
    */
    window.onpopstate = function(e){
        e = e || window.e;
        let state = history.state.name;
        oContent.innerText = data[state];
    }

    // hashchange获取路径哈希值的变化
    window.onhashchange = function(){
        console.log(window.location.hash);
    }

</script>
</body>
</html>