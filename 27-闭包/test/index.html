<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>闭包</title>
	</head>
	<body>
		<ul class="list">
			<li>kyrie</li>
			<li>lebron</li>
			<li>durant</li>
		</ul>
		<script>
			var n = 999;
			function f1(){
				console.log(n);
			}
			f1()
			
			function f2(){
				var b = 999;
			}
			
			
			function m1(){
				let a = 1;
				return function m2(){
					a++;
					console.log(a);
				}
			}
			const result = m1();
			result()	// 2
			
			
			
			
			function fun1(){
				var n = 999;
				nAdd = function(){
					n+=1;
				}
				return function fun2(){
					console.log(n);
				}
			}
			const d = fun1();
			d();	// 999
			nAdd();
			d();	// 1000
			
			
			var name = 'The Window';
			var object = {
				name:'My Object',
				getNameFun:function(){
					console.log(this);
					return function(){
						console.log(this)
						return this.name
					}
				}
			}
			object.getNameFun()()
			console.log( object.getNameFun()() );	// The Window
			
			
		　　/*var name = "The Window";
		　　var object = {
		　　　　name : "My Object",
		　　　　getNameFunc : function(){
		　　　　　　var that = this;
		　　　　　　return function(){
		　　　　　　　　return that.name;
		　　　　　　};
		　　　　}
		　　};
		　　console.log(object.getNameFunc()());	// MyObject
		*/
	   
	   
	   const ali = document.querySelectorAll('.list>li');
	   for(var i = 0; i < ali.length; i++){
		   ali[i].onclick = function(){
			   // console.log(this.innerText,this.textContent);
			   console.log(i)
		   }
	   }
	   
		   for(var i = 0; i < ali.length; i++){
			   (function(i){
				   ali[i].onclick = function(){
					 console.log(i)
				   }
			   })(i)
		   }
		   
		   for(var i = 0; i < 5; i++){
			   (function(i){
				   setTimeout(function(){
				   		console.log(i);
				   },1000*i);
			   })(i)
		   }
		   
		   
		   
		   function fn(a){
			   console.log(a)
		   }
		   setTimeout(fn(10),2000)
		   
		   
		   setTimeout(function fn(){
			   console.log(10);
		   },2000)
		   
		   
		   for(let i = 0; i < 5; i++){
			   setTimeout(function() {
				   console.log(i);
			   },i*1000);
		   }
		   
		   
		   function Father(name){
			   this.name = name;
		   }
		   Father.prototype.show = function(){
			   console.log(this.name);
		   }
		   
		   function Son(name){
			   Father.call(this,name)
		   }
		   
		   let father = new Father('father');
		   let son = new Son('son');
		   
		   console.log(father,son);
		   father.show();
		   son.show();
		</script>
	</body>
</html>
