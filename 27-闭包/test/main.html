<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>闭包</title>
	</head>
	<body>
		<script>
			// 高阶函数除了可以接受函数作为参数外,还可以把函数作为结果值返回.
			function sum(arr){
				return arr.reduce((x,y) => {
					return x + y;
				})
			}
			console.log(sum([1,2,3,4,5]));	// 15
			
			
			// 返回一个求和函数 而不是立即返回一个结果
			function lazy_sum(array){
				var sum = function(){
					return array.reduce((x,y) => {
						return x + y;
					})
				}
				return sum;
			}
			var f1 = lazy_sum([1,2,3,4,5]);
			var f2 = lazy_sum([1,2,3,4,5]);
			console.log(f1(),f1());	// 15 15
			console.log(f1 === f2);	// false
			
			
			function count(){
				var arr = [];
				for(var i = 0; i <=3; i++){
					arr.push(function(){
						console.log(i);
						return i * i;
					})
				}
				return arr;
			}
			var results = count();
			console.log(results);
			console.log(results[0]());	// 16
			console.log(results[1]());	// 16
			console.log(results[2]());	// 16
			
			
			function make_pow(n){
				return function(x){
					return Math.pow(x,n);
				}
			}
			let pow2 = make_pow(2);
			let pow3 = make_pow(3);
			console.log(pow2(3));	// 9
			console.log(pow3(3));	// 27
			
			
			function checkType(type){
				return function(object){
					return Object.prototype.toString.call(object) === '[object ' + type +']';
				}
			}
			var isString = checkType('String');
			console.log( isString('abc') );	// true
			console.log(Object.prototype.toString.call('abc'));	// [object String]
			
		</script>
	</body>
</html>
