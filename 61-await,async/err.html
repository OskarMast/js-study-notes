<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>async/await</title>
	</head>
	<body>
		<script>
			// 如果await后面的异步操作出错,那么等同于async函数返回的Promise 对象被reject.
			async function f1(){
				await new Promise(function(resolve,reject){
					throw new Error('出错了');
				})
			}
			f1()
			.then(v => {
				console.log(v);
			})
			.catch(err => {
				console.log(err);
			})
			
			
			async function f2(){
				try {
					await new Promise((resolve,reject) => {
						throw new Error('出错了');
					})
				}catch(e){
					
				}
				return await ('hello world');
			}
			f2().then(v => {
				console.log(v);
			})
			.catch(err => {
				console.log(err);
			})
			
			
			async function f3(){
				try {
					await new Promise((resolve,reject) => {
						throw new Err('出bug了');
					})
				}catch(e){
					
				}
				await Promise.reject('正常运行中.....');
			}
			f3().then(v => console.log(v))
			.catch(err => {
				console.log(err);
			});
			
			
			async function foo(){
				let foo = await new Promise(resolve=>{
					setTimeout(resolve,1000,'foo');
				});
				let bar = await new Promise(resolve=>{
					setTimeout(resolve,1000,'bar');
				})
				console.log(foo,bar);
			}
			foo()

			
			
			
			
		</script>
	</body>
</html>
