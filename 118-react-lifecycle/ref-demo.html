<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ref</title>
</head>
<body>
<div id="app"></div>
<div id="demo"></div>
<div id="box"></div>
<script src="node_modules/babel-standalone/babel.js"></script>
<script src="node_modules/react/umd/react.development.js"></script>
<script src="node_modules/react-dom/umd/react-dom.development.js"></script>
<script type="text/babel">
class InputAutoFocus extends React.Component{
    constructor(){
        super();
        this.myRef = React.createRef();
        this.handleFocus = this.handleFocus.bind(this);
    }
    handleFocus(){
        console.log(this.myRef.current);
        this.myRef.current.focus();
    }
    render(){
        return(
            <div>
                <p>Hello World</p>
                <input type="text" ref={this.myRef}/>
                <input type="button" defaultValue="点击获取焦点" onClick={this.handleFocus}/>
            </div>
        )
    }
}
ReactDOM.render(
    <InputAutoFocus/>,
    document.getElementById("app")
)


class CustomTextInput extends React.Component{
    constructor(props){
        super(props);
        this.textInput = React.createRef();
    }
    focusTextInput = ()=>{
        this.textInput.current.focus();
    }
    render(){
        return(
            <div>
                <input type="text" ref={this.textInput}/>
                <input
                    type="button"
                    value="Focus the text input"
                    onClick={this.focusTextInput}
                />
            </div>
        )
    }
}
class AutoFocusTextInput extends React.Component{
    constructor(props){
        super(props);
        this.textInput = React.createRef();
    }
    componentDidMount(){
        this.textInput.current.focusTextInput();
        console.log(this.textInput.current);
    }
    render(){
        return(
            <CustomTextInput ref={this.textInput}/>
        )
    }
}
ReactDOM.render(
    <AutoFocusTextInput/>,
    document.getElementById("demo")
)

class Content extends React.Component{
    constructor(props){
        super(props);
        this.contentRef = element => {
            this.contentRef = element;
        }
        this.changeColor = this.changeColor.bind(this);
    }
    changeColor(){
        this.contentRef.style.color = "pink";
    }
    render(){
        return(
            <div>
                <h3 className="title">礼物</h3>
                <p
                    className="content"
                    ref={this.contentRef}
                >
                    如此幸福的一天
                    雾一早就散了，我在花园里干活
                    蜂鸟停在忍冬花上
                    这世上没有一样东西我想占有
                    我知道没有一个人值得我羡慕
                    任何我曾遭受的不幸，我都已忘记
                    想到故我今我同为一人并不使我难为情
                    在我身上没有痛苦
                    直起腰来，我望见蓝色的大海和帆影
                </p>
            </div>
        )
    }
}

class Parent extends React.Component{
    constructor(props){
        super(props)
        this.textRef = React.createRef();
        this.changeTextColor = this.changeTextColor.bind(this);
    }
    changeTextColor(){
        this.textRef.current.changeColor();
    }
    render(){
        return(
            <div>
                <button onClick={this.changeTextColor}>点击按钮</button>
                <Content ref={this.textRef}/>
            </div>
        )
    }
}
ReactDOM.render(
    <Parent/>,
    document.getElementById("box")
)
</script>
</body>
</html>