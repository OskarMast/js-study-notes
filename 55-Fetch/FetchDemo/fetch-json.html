<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Fetch-JSON-example</title>
		<style>
			body,ul,ol{
				padding: 0;
				margin: 0;
			}
			ul,ol{
				list-style:none;
			}
			img{
				float:left;
				width: 200px;
			}
		</style>
	</head>
	<body>
		<ul class="list"></ul>
		<script>
			fetch('https://cdn.xgqfrms.xyz/json/badges.json')
			.then((response) => response.json())
			.then((data) => {
				console.log(data)
			});
			
			const myRequest = new Request('https://mdn.github.io/fetch-examples/fetch-json/products.json');
			fetch(myRequest).then( function(response){
				if(!response.status){
					throw new Error('bug');
				}else{
					return response.json();
				}
			})
// 			.then( (data) => {
// 				const products = data.products;
// 				const oList = document.createElement('ul');
// 				let str = '';
// 				Array.prototype.forEach.call(products,function(current){
// 					str += `<p class='name'>${current.Name}</p>
// 					<p class='price'>${current.Price}</p>
// 					<p class='location'>${current.Location}</p>`;
// 					oList.innerHTML = str;
// 				});
// 				document.body.appendChild(oList);
// 			});
			const oList = document.querySelector('.list');
			const request = new Request('https://cdn.xgqfrms.xyz/json/badges.json');
			fetch(request).then(response => response.json())
			.then(data => {
				const products = data.badges;
				console.log(products);
				let str = '';
				[].forEach.call(products,function(current){
					str += `
					<li class='item'>
						<img src='${current.badge}'>
					</li>`;
					oList.innerHTML = str;
				});
				document.body.appendChild(oList);
			});
			
		</script>
	</body>
</html>
