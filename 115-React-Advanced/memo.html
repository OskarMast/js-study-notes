<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Memo</title>
</head>
<body>
<div id="server"></div>
<script src="./node_modules/babel-standalone/babel.js"></script>
<script src="./node_modules/react/umd/react.development.js"></script>
<script src="./node_modules/react-dom/umd/react-dom.development.js"></script>
<script type="text/babel">
    class Foo extends React.Component{
        shouldComponentUpdate(nextProps,nextState){
            // console.log(nextProps,nextState);
            if(nextProps.name === this.props.name){
                return false;
            }
            return true;
        }
        render(){
            console.log("Foo render");
            return (
                <div>Foo</div>
            )
        }
    }

    class Bar extends React.PureComponent{
        // 传入的person 都是指向同一个对象地址
/*        shouldComponentUpdate(nextProps,nextState){
            console.log(nextProps);
            return true;
        }*/
        render(){
            console.log("Bar render");
            return (
                <div>
                    <p>Bar</p>
                </div>
            )
        }
    }

    class App extends React.Component {
        constructor(props){
            super(props);
            this.state = {
                count : 0,
                person:{
                    age:20
                }
            }
        }
        handleClick = () => {
            this.setState(state => ({
                count : state.count + 1
            }))
            const person = this.state.person;
            person.age++;
            this.setState({person});
        }
        callback = () => {
            console.log("cbfunction");
        }
        render(){
            return (
                <div>
                    <Foo name="kyrie"/>
                    <Bar
/*                        person={this.state.person}
                        name="bar"*/
                        cb={this.callback}
                    />
                    <input
                        type="submit"
                        onClick={this.handleClick}
                        defaultValue="submit"
                    />
                </div>
            )
        }
    }
    ReactDOM.render(
        <App/>,
        document.getElementById("server")
    )
</script>
</body>
</html>