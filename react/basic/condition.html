<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>React - 条件渲染</title>
</head>
<body>
<div id="server"></div>
<div id="demo"></div>
<div id="example"></div>
<div id="kobe"></div>
<div id="root"></div>
<script src="./node_modules/babel-standalone/babel.js"></script>
<script src="./node_modules/react/umd/react.development.js"></script>
<script src="./node_modules/react-dom/umd/react-dom.development.js"></script>
<script type="text/babel">
    function UserGreeting(props){
        return <h1>Welcome back!</h1>;
    }
    function GuestGreeting(props){
        return <h1>Please sign up!</h1>
    }
    function Greeting(props){
        const isLoggedIn = props.isLoggedIn;
        if(isLoggedIn){
            return <UserGreeting/>
        }
        return <GuestGreeting/>
    }


    /*元素变量*/
    function LoginButton(props){
        return (
            <button onClick={props.onClick}>Login in</button>
        )
    }
    function LogoutButton(props){
        return (
            <button onClick={props.onClick}>Logout</button>
        )
    }

    class LoginControl extends React.Component{
        constructor(props){
            super(props);
            this.state = {
                isLoggedIn:false
            }
        }
        handleLoginClick = () => {
            this.setState({
                isLoggedIn:true
            });
        }
        handleLogoutClick = () => {
            this.setState({isLoggedIn:false});
        }
        render(){
            const isLoggedIn = this.state.isLoggedIn;
            let button;
            if(isLoggedIn){
                button = <LoginButton onClick={this.handleLogoutClick}/>
            }else{
                button = <LogoutButton onClick={this.handleLoginClick}/>
            }
            return (
                <div>
                    <Greeting isLoggedIn={isLoggedIn}/>
                    {button}
                </div>
            )
        }
    }
    ReactDOM.render(
        <LoginControl/>,
        document.querySelector("#server")
    )


    class Control extends React.Component{
        constructor(props){
            super(props);
            this.state = {flag:false}
        }
        handleLogout = () => {
            this.setState({flag:false})
        }
        handleLogin = () => {
            this.setState({flag:true})
        }
        render(){
        /*
            使用if else 进行判断
            if(this.state.flag){
                return (
                    <div>
                        <Greeting isLoggedIn={this.state.flag}/>
                        <button onClick={this.handleLogout}>Logout</button>
                    </div>

                )
            }else{
                return (
                    <div>
                        <Greeting isLoggedIn={this.state.flag}/>
                        <button onClick={this.handleLogin}>Login</button>
                    </div>
                )
            }

         */
            // 使用三目运算表达式
             return (
                <div>
                    <Greeting isLoggedIn={this.state.flag}/>
                    {
                        this.state.flag
                        ? <button onClick={this.handleLogout}>Logout</button>
                        : <button onClick={this.handleLogin}>Login</button>
                    }
                </div>
             )
        }
    }
    ReactDOM.render(
        <Control/>,
        document.getElementById('demo')
    )


    // 与运算符渲染,
    function Mailbox(props){
        const unreadMessages = props.unreadMessages;
        console.log(unreadMessages);
        return (
            <div>
                <h1>Hello!</h1>
                {unreadMessages.length > 0 &&
                    <h2>You have {unreadMessages.length} unread messages!!</h2>
                }
            </div>
        )
    }
    const messages = ["React","Re:React","Re:Re: React"];
    ReactDOM.render(
        <Mailbox unreadMessages={messages}/>,
        document.getElementById("example")
    )

    // 三目运算符
    class LoginBtn extends React.Component{
        constructor(props){
            super(props);
            this.state = {
                isLoggedIn:true
            }
        }
        render(){
            let isLoggedIn = this.state.isLoggedIn;
            return (
                <div>
                    The user is <strong>{isLoggedIn ? "current" : "not"}</strong> logged in!
                </div>
            )
        }
    }
    ReactDOM.render(
        <LoginBtn/>,
        document.getElementById("kobe")
    )

    // 阻止组件渲染
    function WarningBanner(props){
        if(!props.warn){
            return null;
        }
        return (
            <div className="warning">
                Wraning!
            </div>
        )
    }
    class Page extends React.Component {
        constructor(props){
            super(props);
            this.state = {showWarning:true};
            this.handleToggleClick = this.handleToggleClick.bind(this);
        }
        handleToggleClick(){
/*            this.setState(state => ({
                showWarning : !state.showWarning
            }))*/
/*            let showWarning = this.state.showWarning;
            this.setState({
                showWarning:!showWarning
            })*/
            this.setState({
                showWarning:!this.state.showWarning
            })
        }
        render() {
            return (
                <div>
                    <WarningBanner warn={this.state.showWarning}/>
                    <button onClick={this.handleToggleClick}>
                        {this.state.showWarning ? "Hide" : "Show"}
                    </button>
                </div>
            )
        }
    }
    ReactDOM.render(
        <Page/>,
        document.getElementById("root")
    )


</script>
</body>
</html>