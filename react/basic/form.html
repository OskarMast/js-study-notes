<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>React-表单</title>
</head>
<body>
<h3>input表单提交</h3>
<div id="demo"></div>
<h3>textarea元素</h3>
<div id="server"></div>
<h3>select元素单选</h3>
<div id="root"></div>
<h3>select元素多选</h3>
<div id="player"></div>
<h3>[type="file"],因为它的value只读,所以它是一个React中的一个非受控组件</h3>
<div id="file"></div>
<h3>处理多个输入时</h3>
<div id="example"></div>
<script src="./node_modules/babel-standalone/babel.js"></script>
<script src="./node_modules/react/umd/react.development.js"></script>
<script src="./node_modules/react-dom/umd/react-dom.development.js"></script>
<script type="text/babel">
// input表单
    class NameForm extends React.Component{
        constructor(props){
            super(props);
            this.state = {value:""}
        }
        handleChange = (event) => {
            this.setState({
                value:event.target.value
            })
        }
        handleSubmit = () => {
            console.log("提交的名字:", this.state.value);
            event.preventDefault()
        }
        render(){
            return (
                <form onSubmit={this.handleSubmit}>
                    <label>
                        名字:
                        <input type="text" value={this.state.value} onChange={this.handleChange}/>
                    </label>
                    <input type="submit" value="提交"/>
                </form>
            )
        }
    }
    ReactDOM.render(
        <NameForm/>,
        document.getElementById("demo")
    )


    // textarea 元素
    class EssayForm extends React.Component {
        constructor(props){
            super(props);
            this.state = {
                value:"请撰写一篇关于你喜欢的 DOM 元素的文章."
            }
        }
        handleChange = (event) => {
            this.setState({
                value:event.target.value
            })
            console.log("提交的文章:",this.state.value);
        }
        handleSubmit = (event) => {
            event.preventDefault();
        }
        render(){
            return (
                <form onSubmit={this.handleSubmit}>
                    <label>
                        文章:
                        <textarea
                            value={this.state.value}
                            onChange={this.handleChange}
                        />
                    </label>
                    <input type="submit" value="提交"/>
                </form>
            )
        }
    }
    ReactDOM.render(
        <EssayForm/>,
        document.getElementById("server")
    )

    // select单选
    class FlavorForm extends React.Component{
        constructor(props){
            super(props);
            this.state = {
                value:"coconut"
            }
        }
        handleChange = (event) => {
            this.setState({
                value:event.target.value,
            })
            console.log(event.target.value);
        }
        handleSubmit = (event) => {
            event.preventDefault();
        }
        render(){
            return (
                <form onSubmit={this.handleSubmit}>
                    <label>
                        选择你喜欢的风味:
                        <select value={this.state.value} onChange={this.handleChange}>
                            <option value="grapefruit">葡萄柚</option>
                            <option value="lime">酸橙</option>
                            <option value="coconut">椰子</option>
                            <option value="mango">芒果</option>
                        </select>
                    </label>
                    <input type="submit" value="提交"/>
                </form>
            )
        }
    }
    ReactDOM.render(
        <FlavorForm/>,
        document.getElementById("root")
    )

    // select多选
    class PlayerForm extends React.Component {
        constructor(props){
            super(props);
            this.state = {
                value:[]
            }
        }
        handleSubmit = (event) => {
            event.preventDefault();
        }
        handleChange = (event) => {
            let newVal = event.target.value
            let stateVal = this.state.value
            console.log("stateVal:",stateVal)
            console.log("newVal:",newVal)
            stateVal.indexOf(newVal) === -1
                ? stateVal.push(newVal)
                : stateVal.length === 1
                ? (stateVal = [])
                : stateVal.splice(stateVal.indexOf(newVal), 1)
            this.setState({ value: stateVal })
        }
        render(){
            return (
                <form action="" onSubmit={this.handleSubmit}>
                    <label>
                        选择你最喜欢的球员:
                        <select
                            value={this.state.value}
                            onChange={this.handleChange}
                            multiple={true}
                        >
                            <option value="kobe">kobe</option>
                            <option value="lebron">lebron</option>
                            <option value="durant">durant</option>
                            <option value="kyrie">kyrie</option>
                        </select>
                    </label>
                    <input type="submit" value="提交"/>
                </form>
            )
        }
    }
    ReactDOM.render(
        <PlayerForm/>,
        document.getElementById("player")
    )

    // input type='file'
    class FileComponent extends React.Component {
        constructor(props){
            super(props);
        }
        handleChange = (event) => {
            let file = event.target.files[0];
            if(/image/.test(file.type)){
                console.log("123")
                let reader = new FileReader();
                reader.readAsDataURL(event.target.files[0]);
                reader.onload = function(event){
                    const img = new Image(140,200);
                    img.src = event.target.result;
                    img.onload = function(){
                        document.body.appendChild(img);
                    }
                }
            }
        }
        handleSubmit = (event) => {
            event.preventDefault();
        }
        render(){
            return (
                <form onSubmit={this.handleSubmit}>
                    <label>
                        请选择文件:
                        <input
                            type="file"
                            onChange={this.handleChange}
                        />
                    </label>
                    <input type="submit" value="提交"/>
                </form>
            )
        }
    }
    ReactDOM.render(
        <FileComponent/>,
        document.getElementById("file")
    )

    class Reservation extends React.Component {
        constructor(props){
            super(props);
            this.state = {
                isGoing:true,
                numberOfGuests:2
            }
        }
        handleInputChange = (event) => {
            let target = event.target;
            let value = target.type === 'checkbox' ? target.checked : target.value;
            let name = target.name;
            console.log("checked:",target.checked);
            console.log("value:",event.target.value,"type:",event.target.type);
            this.setState({
                [name]:value
            })
        }
        render(){
            return (
                <form>
                    <p>
                        参与：
                        <input
                            name="isGoing"
                            type="checkbox"
                            checked={this.state.isGoing}
                            onChange={this.handleInputChange}
                        />
                    </p>
                    <p>
                        来宾人数:
                        <input
                            name="numberOfGuests"
                            type="number"
                            value={this.state.numberOfGuests}
                            onChange={this.handleInputChange}
                        />
                    </p>
                </form>

            )
        }
    }
    ReactDOM.render(
        <Reservation/>,
        document.getElementById("example")
    )
</script>
</body>
</html>