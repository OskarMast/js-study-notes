<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>监听窗口大小</title>
</head>
<body>
<div id="server"></div>
<div id="root"></div>
<script src="./node_modules/babel-standalone/babel.js"></script>
<script src="./node_modules/react/umd/react.development.js"></script>
<script src="./node_modules/react-dom/umd/react-dom.development.js"></script>
<script type="text/babel">
    class App extends React.Component{
        constructor(props){
            super(props);
            this.state = {
                x:window.innerWidth,
                y:window.innerHeight
            }
        }
        onResize = () => {
            this.setState({
                x:window.innerWidth,
                y:window.innerHeight
            })
        }
        componentDidMount(){
            window.addEventListener("resize",() => {
                this.onResize();
                console.log("hello")
            },false)
            document.title = `${this.state.x}x${this.state.y}`
        }
        componentDidUpdate(){
            document.title = `${this.state.x}x${this.state.y}`
        }
        componentWillUnmount(){
            window.removeEventListener('resize',this.onResize,false);
        }
        render(){
            return (
                <div>
                    {this.state.x}-{this.state.y}
                </div>
            )
        }
    }
    ReactDOM.render(
        <App/>,
        document.getElementById("server")
    )


    function SizeComponent(){
        const [size,setSize] = React.useState([window.innerWidth,window.innerHeight])
        function onResize(){
            setSize([window.innerWidth,window.innerHeight]);
        }
        React.useEffect( () => {
            window.addEventListener("resize",onResize,false)
            return () => {
                window.removeEventListener("resize",onResize,false)
            }
        } )
        return (
            <div>
                {size.join(" x ")}
            </div>
        )
    }
    ReactDOM.render(
        <SizeComponent/>,
        document.getElementById("root")
    )
</script>
</body>
</html>