<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>文件下载</title>
</head>
<body>
<a href="./1.jpg" download="guo.jpg">下载</a>
<a href="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1558682258988&di=e51dab60a7e53131a553a719eeaea4d6&imgtype=0&src=http%3A%2F%2Fn.sinaimg.cn%2Ftransform%2F20141220%2Fcczmvun3485110.jpg">下载网络图片</a>
<button id="btn">下载</button>
<button id="but">下载doc</button>
<script>
    let xhr = new XMLHttpRequest();
    xhr.open("GET","http://www.tanzhouweb.com/20test/data.php",true);
    xhr.send();
    xhr.onreadystatechange = function(){
        if(xhr.readyState == 4 && xhr.status == 200){
            console.log(xhr.responseText);
        }
    }
    // 在线资源会默认预燃
    let a = document.querySelectorAll("a")[1];
    a.onclick = function(e){
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
    // 防止别人抓取页面上的资源
    btn.onclick = function(){
        let link = document.createElement("a");
        link.href = "./1.jpg";
        link.download = new Date().getTime() + ".jpg";
        link.click();
    }

    /*
    * downloadFile 文件下载的函数
    * filename 文件名
    * content  文件内容
    * 1. 先创建一个a标签,
    * 2. 然后设置a的download属性
    * */
    function downloadFile(filename,content){
        let link = document.createElement("a");
        // 创建一个Blob对象格式的数据,并设置mime的type为doc
        let blob = new Blob([content],{type:"application/msword"});
        // 创建一个URL
        let url = window.URL.createObjectURL(blob);
        link.href = url;
        link.download = filename;
        link.click();
    }
    let str = "Hello World!";
    but.onclick = function(){
        downloadFile("你好世界",str);
    }
</script>
</body>
</html>