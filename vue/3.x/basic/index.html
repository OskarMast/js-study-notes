<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Vue-3.x</title>
		<style>
			div[v-cloak]{display:none;}
		</style>
	</head>
	<body>
		<div id="root" v-cloak>
			<button @click.stop="add">{{counter}}</button>
			<button @click.stop="clear_timer">clear timer</button>
			<span :title="message">鼠标悬停几秒钟查看此处动态绑定的提示信息!</span>
		</div>
		<div id="event-handling">
			<p>{{message}}</p>
			<button @click.stop="reverseMessage">反转message</button>
		</div>
		<div id="two-way-binding">
			<input type="text" v-model="message">
			<p>{{message}}</p>
		</div>
		<div id="conditional-rendering">
			<button @click.stop="toggle_show">toggle</button>
			<p v-if="seen">现在你看到我了～</p>
		</div>
		
		<!-- 条件渲染 -->
		<div id="list-rendering">
			<ol>
				<li v-for="(todo,index) in todos" :key="'todo-'+index">{{todo['text']}}</li>
			</ol>
		</div>
		
		<script src="https://unpkg.com/vue@next"></script>
		<script>
			const Counter = {
				data(){
					return {
						counter:0,
						timer:null,
						message:'You loaded this page on ' + new Date().toLocaleString()
					}
				},
				methods:{
					add(){
						this.counter += 1;
					},
					clear_timer(){
						if(this.timer){
							clearInterval(this.timer);
						}
					}
				},
				mounted(){
					this.timer = setInterval(() => {
						this.counter += 1;
					},1000)
				}
			}
			Vue.createApp(Counter).mount("#root");
			
				// 事件绑定
			const EventHandling = {
				data(){
					return {
						message:'hello world'
					}
				},
				methods:{
					reverseMessage(){
						this.message = this.message.split("").reverse().join("");
					}
				}
			}
			Vue.createApp(EventHandling).mount("#event-handling");
			
			// 表单绑定
			const TwoWayBinding = {
				data(){
					return {
						message:'Hello Vue!'
					}
				}
			}
			Vue.createApp(TwoWayBinding).mount("#two-way-binding");
			
			// 条件渲染
			const ConditionalRendering = {
				data() {
					return {
						seen:false
					}
				},
				methods:{
					toggle_show(){
						this.seen = !this.seen;
					}
				}
			}
			Vue.createApp(ConditionalRendering).mount("#conditional-rendering");
			
			// 条件渲染
			const ListRendering = {
				data(){
					return {
						todos:[
							{text:"Learn JavaScript"},
							{text:"Learn Vue"},
							{text:"Build something awesome"}
						]
					}
				}
			}
			Vue.createApp(ListRendering).mount("#list-rendering");
		</script>
	</body>
</html>
