<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>beforeRouteEnter获取数据</title>
	</head>
	<body>
		<div id="server">
			<router-link :to="{name:'index'}">首页</router-link>
			<router-link :to="{name:'info'}">个人中心</router-link>
			<router-view></router-view>
		</div>
		<script src="https://unpkg.com/vue/dist/vue.js"></script>
		<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
		<script>
			const Header = Vue.component("index",{
				template:"<div><p>首页</p></div>",
			});
			const Info = Vue.component("info",{
				template:"<div><p>个人中心</p><p>{{list}}</p></div>",
				data(){
					return{
						list:""
					}
				},
				beforeRouteEnter(to,from,next){
					setTimeout(()=>{
						next(vm=>{
							vm.list = "数据更新完成";
						})
					},3000);
				},
			});
			const router = new VueRouter({
				routes:[
					{
						path:"/",
						name:"index",
						component:Index
					},
					{
						path:"/info",
						name:"info",
						component:Info
					}
				]
			});
			new Vue({
				el:"#server",
				router
			})
		</script>
	</body>
</html>
