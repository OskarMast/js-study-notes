<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>跨域</title>
		<style>
			body,ul,ol{
				padding: 0;
				margin: 0;
			}
			ul,ol{
				list-style:none;
			}
		</style>
	</head>
	<body>
		<form action="/" method='post'>
			<input type="text" name='name'>
			<input type="text" age='age'>
			<input type="submit">
		</form>
		
		<script>
			const oName = document.querySelector('input[name="name"]');
			const oAge = document.querySelector('input[age="age"]');
			const oSubmit = document.querySelector('input[type="submit"]');
			
			const form = new FormData();
			form.append('name',oName.value);
			form.append('age',oAge.value);
			
			fetch('http://localhost:3000/?name=kyrie&age=26')
			.then(res => {
				console.log(res);	
				// Response {type:'basic',url:'http://localhost:3000'status:200,ok:true}
				return res.json();
			})
			.then(data => {
				console.log(data);
			});
			
				
			oSubmit.onclick = function(){
				fetch('http://localhost:3000',{
					method:'post',
					// body:'name=kyrie&skill=crossover',
					body:form,
					headers:{
						'Content-Type':'application/x-www-form-urlencoded'
					}
				})
				.then(function(response){
					return response.text();
				})
				.then(function(data){
					console.log(data);
				});
			}
			
			function data(myJson){
				console.log(myJson);
			}
		</script>
		<script src='http://localhost:3000/jsonp?cb=data'></script>
	</body>
</html>
