<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>对象不可变性</title>
</head>
<body>
<script type="text/javascript">
    var myObj = {}
    Object.defineProperty(myObj,'a',{
        value:42,
        writable:false,
        configurable:false
    });
    console.log(myObj);



    const phone = {
        name:'iPhone 6s'
    }
    Object.preventExtensions(phone);

    phone.color = 'pink';
    console.log(phone); // {name: "iPhone 6s"}

    delete phone.name;
    console.log(phone);

    phone.__proto__.say = function(){
        console.log(this.name);
    }
    console.log(phone);
    phone.say()



    const car = {
        color:'red'
    }
    Object.preventExtensions(car);
    console.log(Object.getOwnPropertyDescriptor(car,'color'));

    Object.seal(car);
    console.log(Object.getOwnPropertyDescriptor(car,'color'));

    Object.freeze(car);
    console.log(Object.getOwnPropertyDescriptor(car,'color'));


    var foo = {
        age:27
    }
    var object = {
        firstName:'kyrie',
        lastName:'irving',
        foo
    }
    console.log(object);

    Object.freeze(object);

    object.firstName = 'lebron';
    console.log(object.firstName);    // Kyrie

    object.foo.age = 30;
    console.log(object.foo.age);    // 30

</script>
<script type="text/javascript">
    const obj1 = {
        get a(){
            return 2
        }
    }
    console.log('a:',obj1.a);   // 2
    obj1.a = 3;
    console.log('a:',obj1.a);   // 2

    const obj2 = {
        get a(){
            return this._a_;
        },
        set a(value){
            this._a_ = value * 2;
        }
    }
    obj2.a = 2;
    console.log(obj2.a);

    var obj3 = {
        get a(){
            return 2;
        }
    }
    Object.defineProperty(obj3,'b',{
        get:function(){
            return this.a *2;
        },
        enumerable:true
    })
    console.log('obj3.a:',obj3.a);
    console.log('obj3.b:',obj3.b);


    var obj4 = {
        count:1,
        get:function(){
            return this.count;
        },
        set:function(value){
            this.count = value;
        }
    }
    console.log('obj4.count:',obj4.count);
    obj4.count = 5;
    console.log(obj4.count);
</script>
</body>
</html>