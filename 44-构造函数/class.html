<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ES6的类</title>
</head>
<body>
    <script>
        // class Point{
        //     constructor(x,y){
        //         this.x = x;
        //         this.y = y;
        //     }
        //     toString(){
        //         console.log(this.x + this.y);
        //     }
        // }

        function Calc(x,y){
            this.x = x;
            this.y = y;
        }
        Calc.prototype.toString = function(){
            console.log(this.x+this.y);
        }
        
        // console.log(Object.keys(Point.prototype));  // []
        console.log(Object.keys(Calc.prototype));   // [toString']

        class Foo{
            constructor(){
                return Object.create(null);
            }
        }
        let obj = new Foo();
        console.log(obj);
        console.log(obj.__proto__);

        let o = Object.create({});
        console.log(o.constructor);
        console.log(o.__proto__.__proto__ == Object.prototype); // true

        class Add{
            constructor(a,b){
                this.a = a;
                this.b = b;
            }
            sum(){
                console.log(this.a + this.b);
            }
        }
        let add = new Add(2,3);
        add.sum();  // 5
        console.log( add.hasOwnProperty('a') ); // true
        console.log( add.hasOwnProperty('b'));  // true
        console.log( add.hasOwnProperty('sum'));    // false
        console.log(add);
        console.log( add.__proto__.hasOwnProperty('sum') ); // true
        console.log( Add.prototype.hasOwnProperty('sum') ); // true

        let p1 = new Add(3,2);
        let p2 = new Add(2,3);
        console.log(p1.__proto__ == p2.__proto__);  // true

        let object = new Object();
        object.prop = 'exists';

        function changeO(){
            object.newprop = object.prop;
            delete object.prop;
        }
        console.log( object.hasOwnProperty('prop') );   // true
        changeO();      
        console.log( object.hasOwnProperty('prop') );   // false
        console.log(object.newprop);    // exists

        class Bar{
            constructor(a,b){
                this.a = a;
                this.b = b;
            }
            classMethod(){
                console.log(this.a+this.b);
            }
        }

        let bar = new Bar(3,6);
        bar.classMethod();  // bar.classMethod is not a function

        // 子类可以继承父类的静态方法

        class Point{
            constructor(x,y){
                this.x = x;
                this.y = y;
            }
            toString(){
                console.log(this.x + this.y);
            }
        }

        class ColorPoint extends Point{
            constructor(x,y,color){
                super(x,y);
                this.color = color;
            }
            toString(){
                console.log(this.color + '' + super.toString() );
            }
        }

        let cp = new ColorPoint(2,3,'green');
        console.log(cp);    

        class A{
            static hello(){
                console.log('hello world');
            }
        }
        class B extends A{};
        B.hello();  // Hello World

        let s = 'Hello World';
        let word = s.substring(s.indexOf(' ')+1,s.length);
        console.log(word);  // World
        console.log(s.indexOf(' '));    // 5  从0开始
        console.log( s.substring(6,11) );   // World
        console.log( s.substr(6,5));    // World

        let string = new String('Hello World');
        console.log(string.__proto__.__proto__.constructor);    // Object

        console.log(string.__proto__ == String.prototype);  // true
        console.dir(String);
        console.log(String.__proto__.constructor);  // Function
        console.log(typeof String.__proto__);   // function
        console.log(String.__proto__.__proto__.constructor);    //Object

        let str = 'test';
        str.len = 4;
        let t = str.len;
        console.log(t) ;    // undefined
        console.log(Function.__proto__ == Function.prototype);  // true
        console.log(Function.prototype == Object.__proto__);    // true
        console.log(Function.__proto__ == Object.__proto__);    // true
        console.log(Function.prototype.__proto__ == Object.prototype);  // true
        
    </script>   
</body>
</html>