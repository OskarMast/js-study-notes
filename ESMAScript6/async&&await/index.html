<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>async/await</title>
	</head>
	<body>
		<script>
			async function timeout(){
				return 'hello world'
			}
			const result = timeout();
			console.log(result);	// 返回一个Promise对象  Promise {<resolved>: "hello world"}
			
			result.then(res => {
				console.log(res);	// hello world
			})
			.catch(err => {
				console.log(err);
			})
			
			
			function foo(ms){
				return new Promise(resolve => {
					setTimeout(() => resolve('foo'),ms);
				})
			}
			function bar(ms){
				return new Promise(resolve => {
					setTimeout(() => {
						resolve('bar')
					},1500);
				})
			}
			
			async function getWord(){
				const v1 = await foo(1500);
				const v2 = await bar(1500);
				console.log(v1);
				console.log(v2);
			}
			getWord();
			
			
			async function helloWorld(flag){
				if(flag){
					return 'hello world'
				}else{
					throw new Error('oh my god');
				}
			}
			console.log(helloWorld(true));
			helloWorld(false).catch(err=>{
				console.log(err);
			})
			
			
			
			// ajax封装
			function dobuleNumber(number){
				return new Promise((resolve,reject) => {
					setTimeout(() => {
						resolve(2 * number)
					},2000);
				})
			}
			
			async function getNumber(){
				let value = await dobuleNumber(30);
				console.log(value);
			}
			getNumber();	// 60
			
		</script>
	</body>
</html>
