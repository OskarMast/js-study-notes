<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Iterator和 for...of</title>
</head>
<body>
<ul>
    <li class="item">1</li>
    <li class="item">2</li>
    <li class="item">3  </li>
</ul>
<script>
// 任何数据，只要部署了Iterator接口，就可以完成遍历操作。Iterator主要供 for...of 消费
    const myArray = [1,2,3];
    const it = myArray[Symbol.iterator]();
    console.log(it);
    console.log( it.next() );   // {value:1,done:false}
    console.log( it.next() )    // {value:2,done:false}
    console.log( it.next() );   // {value:3,done:false}
    console.log( it.next() );   // {value:undefined,done:true}

    const array = [1,2,3,4,5];
    function makeIterator(array){
        let idx = 0;
        return {
            next:function(){
                return {
                    value:array[idx++],
                    done:(idx > array.length)
                }
            }
        }
    }
    const It = makeIterator(array);
    console.log(It.next());
    console.log(It.next());
    console.log(It.next());
    console.log(It.next());
    console.log(It.next());
    console.log(It.next());


/*    const obj = {
        [Symbol.iterator]:function(){
            return {
                next:function(){
                    return {
                        value:1,
                        done:false
                    }
                }
            }
        }
    }*/
    const aItem = document.querySelectorAll('.item');
    const aItemArray = document.getElementsByClassName('item');
    console.log(aItem,aItemArray)
    for(let value of aItem){
        console.log(value);
    }
    for(let value of aItemArray){
        console.log(value);
    }
    function foo(a,b,c,d){
        for(let value of arguments){
            console.log(value);
        }
    }
    foo(1,2,3,4);

    for(let value of 'Hello,World'){
        console.log(value);
    }

    const player = {
        firstName:'Kyrie',
        lastName:'Irving',
        age:28,
        team:'Nets'
    }

    Object.defineProperty(player,Symbol.iterator,{
        enumerable:false,
        writable:false,
        configurable:true,
        value:function(){
            var self = this;
            var idx = 0;
            var keys = Object.keys(self);
            return {
                next:function(){
                    return {
                        value:self[keys[idx++]],
                        done:(idx > keys.length)
                    }
                }
            }
        }
    });

    let objIterator = player[Symbol.iterator]();
    console.log( objIterator.next() );
    console.log( objIterator.next() );
    console.log( objIterator.next() );
    console.log( objIterator.next() );

    for(let value of player){
        console.log(value);
    }
</script>
</body>
</html>